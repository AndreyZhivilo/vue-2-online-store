(function(){"use strict";var t={648:function(t,s,a){var e=a(6369),r=function(){var t=this,s=t._self._c;return s("div",[s("Header"),s("router-view"),s("Footer")],1)},i=[],o=function(){var t=this,s=t._self._c;return s("header",{staticClass:"header"},[s("div",{staticClass:"header__wrapper container"},[s("span",{staticClass:"header__info"},[t._v("Каталог")]),t._m(0),s("a",{staticClass:"header__tel",attrs:{href:"tel:8 800 600 90 09"}},[t._v(" 8 800 600 90 09 ")]),s("CartIndicator")],1)])},c=[function(){var t=this,s=t._self._c;return s("a",{staticClass:"header__logo",attrs:{href:"#"}},[s("img",{attrs:{src:"img/svg/logo-tech.svg",alt:"Логотип интернет магазина Технозавррр",width:"190",height:"33"}})])}],l=function(){var t=this,s=t._self._c;return s("router-link",{staticClass:"header__cart",attrs:{to:{name:"cart"},"aria-label":"Корзина с товарами"}},[s("svg",{attrs:{width:"30",height:"21",fill:"currentColor"}},[s("use",{attrs:{"xlink:href":"#icon-cart"}})]),t.isLoading?s("span",{staticClass:"header__count",attrs:{"aria-label":"Количество товаров"}},[t._v("?")]):s("span",{staticClass:"header__count",attrs:{"aria-label":"Количество товаров"}},[t._v(t._s(t.productsAmount))])])},n=[],u=a(3822),d={name:"CartIndicator",computed:{...(0,u.Se)({isLoading:"cartIsLoading",productsAmount:"cartProductsCount"})}},_=d,p=a(1001),m=(0,p.Z)(_,l,n,!1,null,null,null),h=m.exports,f={name:"Header",components:{CartIndicator:h}},v=f,C=(0,p.Z)(v,o,c,!1,null,null,null),g=C.exports,b=function(){var t=this,s=t._self._c;return s("footer",{staticClass:"footer"},[s("div",{staticClass:"footer__wrapper container"},[t._m(0),s("ul",{staticClass:"footer__social social"},[s("li",{staticClass:"social__item"},[s("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Вконтакте"}},[s("svg",{attrs:{width:"20",height:"11",fill:"currentColor"}},[s("use",{attrs:{"xlink:href":"#icon-vk"}})])])]),s("li",{staticClass:"social__item"},[s("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Инстаграм"}},[s("svg",{attrs:{width:"17",height:"17",fill:"currentColor"}},[s("use",{attrs:{"xlink:href":"#icon-insta"}})])])]),s("li",{staticClass:"social__item"},[s("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Facebook"}},[s("svg",{attrs:{width:"17",height:"17",fill:"currentColor"}},[s("use",{attrs:{"xlink:href":"#icon-facebook"}})])])]),s("li",{staticClass:"social__item"},[s("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Twitter"}},[s("svg",{attrs:{width:"17",height:"14",fill:"currentColor"}},[s("use",{attrs:{"xlink:href":"#icon-twitter"}})])])]),s("li",{staticClass:"social__item"},[s("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Telegram"}},[s("svg",{attrs:{width:"19",height:"17",fill:"currentColor"}},[s("use",{attrs:{"xlink:href":"#icon-telegram"}})])])])]),s("p",{staticClass:"footer__desc"},[t._v(" Все права на материалы, находящиеся на сайте, охраняются в соответствии с законодательством РФ, в том числе об авторском праве и смежных правах. ")]),t._m(1),s("span",{staticClass:"footer__copyright"},[t._v(" © 2020 Технозавррр ")])])])},y=[function(){var t=this,s=t._self._c;return s("ul",{staticClass:"footer__links"},[s("li",[s("a",{staticClass:"footer__link",attrs:{href:"#"}},[t._v(" Каталог ")])]),s("li",[s("a",{staticClass:"footer__link",attrs:{href:"tel:88006009009"}},[t._v(" 8 800 600 90 09 ")])]),s("li",[s("a",{staticClass:"footer__link",attrs:{href:"mailto:hi@technozavrrr.com"}},[t._v(" hi@technozavrrr.com ")])]),s("li",[s("a",{staticClass:"footer__link",attrs:{href:"#"}},[t._v(" Распродажа ")])]),s("li",[s("a",{staticClass:"footer__link footer__link--medium",attrs:{href:"#"}},[t._v(" Заказать звонок ")])])])},function(){var t=this,s=t._self._c;return s("ul",{staticClass:"footer__data"},[s("li",[s("a",{staticClass:"footer__link",attrs:{href:"#",target:"_blank",rel:"noopener",type:"application/pdf"}},[t._v(" Политика конфиденциальности ")])]),s("li",[s("a",{staticClass:"footer__link",attrs:{href:"#",target:"_blank",rel:"noopener",type:"application/pdf"}},[t._v(" Публичная оферта ")])])])}],k={name:"Footer"},P=k,w=(0,p.Z)(P,b,y,!1,null,null,null),I=w.exports,x={name:"App",components:{Header:g,Footer:I},created(){const t=localStorage.getItem("userAccsessKey");t&&this.updateUserKey(t),this.loadCart()},methods:{...(0,u.OI)(["updateUserKey"]),...(0,u.nv)(["loadCart"])}},T=x,D=(0,p.Z)(T,r,i,!1,null,null,null),F=D.exports,O=a(2631),L=function(){var t=this,s=t._self._c;return s("main",{staticClass:"content container"},[t._m(0),s("div",{staticClass:"content__catalog"},[s("ProductsFilter",{attrs:{"price-from":t.filterPriceFrom,"price-to":t.filterPriceTo,"category-id":t.filterCategoryId,"color-id":t.filterColorId},on:{"update:priceFrom":function(s){t.filterPriceFrom=s},"update:price-from":function(s){t.filterPriceFrom=s},"update:priceTo":function(s){t.filterPriceTo=s},"update:price-to":function(s){t.filterPriceTo=s},"update:categoryId":function(s){t.filterCategoryId=s},"update:category-id":function(s){t.filterCategoryId=s},"update:colorId":function(s){t.filterColorId=s},"update:color-id":function(s){t.filterColorId=s}}}),s("section",{staticClass:"catalog"},[t.isLoading?s("div",[t._v("Ищем товары...")]):t.isError?s("div",[t._v("Произошла ошибка...")]):s("ProductsLists",{attrs:{products:t.products},on:{"update:color":t.selectProductColor}}),s("BasePagination",{attrs:{page:t.page,perPage:t.productsPerPage,count:t.productsCount},on:{"update:page":function(s){t.page=s}}})],1)],1)])},A=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"content__top content__top--catalog"},[s("h1",{staticClass:"content__title"},[t._v("Каталог")]),s("span",{staticClass:"content__info"},[t._v(" 152 товара ")])])}],E=function(){var t=this,s=t._self._c;return s("ul",{staticClass:"catalog__list"},t._l(t.products,(function(a){return s("ProductItem",{key:a.id,attrs:{product:a},on:{"update:color":t.updateColor}})})),1)},S=[],$=function(){var t=this,s=t._self._c;return s("li",{staticClass:"catalog__item"},[s("router-link",{staticClass:"catalog__pic",attrs:{to:{name:"product",params:{id:t.product.id}}}},[s("img",{attrs:{src:t.product.img,alt:t.product.title}})]),s("h3",{staticClass:"catalog__title"},[s("a",{attrs:{href:"#"}},[t._v(" "+t._s(t.product.title)+" ")])]),s("span",{staticClass:"catalog__price"},[t._v(" "+t._s(t._f("numberFormat")(t.product.price))+" ")]),s("ul",{staticClass:"colors colors--black"},t._l(t.product.colors,(function(a){return s("li",{key:a.id,staticClass:"colors__item"},[s("label",{staticClass:"colors__label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.currentColorId,expression:"currentColorId"}],staticClass:"colors__radio sr-only",attrs:{type:"radio",name:t.product.id},domProps:{value:a.id,checked:t._q(t.currentColorId,a.id)},on:{change:function(s){t.currentColorId=a.id}}}),s("span",{staticClass:"colors__value",style:{"background-color":a.code}})])])})),0)],1)},Z=[];function j(t){return(new Intl.NumberFormat).format(t)}var B={name:"ProductItem",props:["product"],filters:{numberFormat:j},data(){return{currentColorId:0}},watch:{currentColorId(t){const s=this.product.id;this.$emit("update:color",{id:s,value:t})}}},V=B,K=(0,p.Z)(V,$,Z,!1,null,null,null),U=K.exports,N={name:"ProductsList",components:{ProductItem:U},props:["products"],methods:{updateColor(t){this.$emit("update:color",t)}}},z=N,q=(0,p.Z)(z,E,S,!1,null,null,null),M=q.exports,R=function(){var t=this,s=t._self._c;return s("ul",{staticClass:"catalog__pagination pagination"},[s("li",{staticClass:"pagination__item"},[s("a",{staticClass:"pagination__link pagination__link--arrow",class:{"pagination__link--disabled":1===t.page},attrs:{href:"#","aria-label":"Предыдущая страница"},on:{click:function(s){return s.preventDefault(),t.prevPage.apply(null,arguments)}}},[s("svg",{attrs:{width:"8",height:"14",fill:"currentColor"}},[s("use",{attrs:{"xlink:href":"#icon-arrow-left"}})])])]),t._l(t.pages,(function(a){return s("li",{key:a,staticClass:"pagination__item"},[s("a",{staticClass:"pagination__link",class:{"pagination__link--current":a===t.page},attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.pageUpdate(a)}}},[t._v(" "+t._s(a)+" ")])])})),s("li",{staticClass:"pagination__item"},[s("a",{staticClass:"pagination__link pagination__link--arrow",class:{"pagination__link--disabled":t.page===t.pages},attrs:{href:"#","aria-label":"Следующая страница"},on:{click:function(s){return s.preventDefault(),t.nextPage.apply(null,arguments)}}},[s("svg",{attrs:{width:"8",height:"14",fill:"currentColor"}},[s("use",{attrs:{"xlink:href":"#icon-arrow-right"}})])])])],2)},G=[],J={name:"BasePagination",props:["page","perPage","count"],methods:{pageUpdate(t){this.$emit("update:page",t)},nextPage(){this.$emit("update:page",this.page+1)},prevPage(){this.$emit("update:page",this.page-1)}},computed:{pages(){return Math.ceil(this.count/this.perPage)}}},W=J,H=(0,p.Z)(W,R,G,!1,null,null,null),Q=H.exports,X=function(){var t=this,s=t._self._c;return s("aside",{staticClass:"filter"},[s("h2",{staticClass:"filter__title"},[t._v("Фильтры")]),s("form",{staticClass:"filter__form form",attrs:{action:"#",method:"get"}},[s("fieldset",{staticClass:"form__block"},[s("legend",{staticClass:"form__legend"},[t._v("Цена")]),s("label",{staticClass:"form__label form__label--price"},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.currentPriceFrom,expression:"currentPriceFrom",modifiers:{number:!0}}],staticClass:"form__input",attrs:{type:"text",name:"min-price"},domProps:{value:t.currentPriceFrom},on:{input:function(s){s.target.composing||(t.currentPriceFrom=t._n(s.target.value))},blur:function(s){return t.$forceUpdate()}}}),s("span",{staticClass:"form__value"},[t._v("От")])]),s("label",{staticClass:"form__label form__label--price"},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.currentPriceTo,expression:"currentPriceTo",modifiers:{number:!0}}],staticClass:"form__input",attrs:{type:"text",name:"max-price"},domProps:{value:t.currentPriceTo},on:{input:function(s){s.target.composing||(t.currentPriceTo=t._n(s.target.value))},blur:function(s){return t.$forceUpdate()}}}),s("span",{staticClass:"form__value"},[t._v("До")])])]),s("fieldset",{staticClass:"form__block"},[s("legend",{staticClass:"form__legend"},[t._v("Категория")]),s("label",{staticClass:"form__label form__label--select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.currentCategoryId,expression:"currentCategoryId"}],staticClass:"form__select",attrs:{type:"text",name:"category"},on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var s="_value"in t?t._value:t.value;return s}));t.currentCategoryId=s.target.multiple?a:a[0]}}},[s("option",{attrs:{value:"0"}},[t._v("Все категории")]),t._l(t.categories,(function(a){return s("option",{key:a.id,domProps:{value:a.id}},[t._v(" "+t._s(a.title)+" ")])}))],2)])]),s("fieldset",{staticClass:"form__block"},[s("legend",{staticClass:"form__legend"},[t._v("Цвет")]),s("ul",{staticClass:"colors"},t._l(t.colors,(function(a){return s("li",{key:a.id,staticClass:"colors__item"},[s("label",{staticClass:"colors__label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.curretnColorId,expression:"curretnColorId"}],staticClass:"colors__radio sr-only",attrs:{type:"radio",name:"color"},domProps:{value:a.id,checked:t._q(t.curretnColorId,a.id)},on:{change:function(s){t.curretnColorId=a.id}}}),s("span",{staticClass:"colors__value",style:{"background-color":a.code}})])])})),0)]),t._m(0),s("button",{staticClass:"filter__submit button button--primery",attrs:{type:"submit"},on:{click:function(s){return s.preventDefault(),t.submit.apply(null,arguments)}}},[t._v(" Применить ")]),s("button",{staticClass:"filter__reset button button--second",attrs:{type:"button"},on:{click:t.reset}},[t._v(" Сбросить ")])])])},Y=[function(){var t=this,s=t._self._c;return s("fieldset",{staticClass:"form__block"},[s("legend",{staticClass:"form__legend"},[t._v("Объемб в ГБ")]),s("ul",{staticClass:"check-list"},[s("li",{staticClass:"check-list__item"},[s("label",{staticClass:"check-list__label"},[s("input",{staticClass:"check-list__check sr-only",attrs:{type:"checkbox",name:"volume",value:"8",checked:""}}),s("span",{staticClass:"check-list__desc"},[t._v(" 8 "),s("span",[t._v("(313)")])])])]),s("li",{staticClass:"check-list__item"},[s("label",{staticClass:"check-list__label"},[s("input",{staticClass:"check-list__check sr-only",attrs:{type:"checkbox",name:"volume",value:"16"}}),s("span",{staticClass:"check-list__desc"},[t._v(" 16 "),s("span",[t._v("(461)")])])])]),s("li",{staticClass:"check-list__item"},[s("label",{staticClass:"check-list__label"},[s("input",{staticClass:"check-list__check sr-only",attrs:{type:"checkbox",name:"volume",value:"32"}}),s("span",{staticClass:"check-list__desc"},[t._v(" 32 "),s("span",[t._v("(313)")])])])]),s("li",{staticClass:"check-list__item"},[s("label",{staticClass:"check-list__label"},[s("input",{staticClass:"check-list__check sr-only",attrs:{type:"checkbox",name:"volume",value:"64"}}),s("span",{staticClass:"check-list__desc"},[t._v(" 64 "),s("span",[t._v("(313)")])])])]),s("li",{staticClass:"check-list__item"},[s("label",{staticClass:"check-list__label"},[s("input",{staticClass:"check-list__check sr-only",attrs:{type:"checkbox",name:"volume",value:"128"}}),s("span",{staticClass:"check-list__desc"},[t._v(" 128 "),s("span",[t._v("(313)")])])])]),s("li",{staticClass:"check-list__item"},[s("label",{staticClass:"check-list__label"},[s("input",{staticClass:"check-list__check sr-only",attrs:{type:"checkbox",name:"volume",value:"264"}}),s("span",{staticClass:"check-list__desc"},[t._v(" 264 "),s("span",[t._v("(313)")])])])])])])}],tt={name:"ProductsFilter",props:["priceFrom","priceTo","categoryId","colorId"],data(){return{currentPriceFrom:0,currentPriceTo:0,currentCategoryId:0,curretnColorId:0,categories:[],colorsData:[]}},methods:{submit(){this.$emit("update:priceFrom",this.currentPriceFrom),this.$emit("update:priceTo",this.currentPriceTo),this.$emit("update:categoryId",this.currentCategoryId),this.$emit("update:colorId",this.curretnColorId)},reset(){this.currentPriceFrom=0,this.currentPriceTo=0,this.currentCategoryId=0,this.curretnColorId=0,this.submit()},async loadCategories(){const t=new URL("https://vue-study.skillbox.cc/api/productCategories");try{const s=await fetch(t),a=await s.json();this.categories=a.items}catch(s){console.warn(s)}},async loadColors(){const t=new URL("https://vue-study.skillbox.cc/api/colors");try{const s=await fetch(t),a=await s.json();this.colorsData=a.items}catch(s){console.warn(s)}}},computed:{colors(){return this.colorsData}},created(){this.loadCategories(),this.loadColors()}},st=tt,at=(0,p.Z)(st,X,Y,!1,null,null,null),et=at.exports,rt={name:"MainPage",components:{ProductsLists:M,BasePagination:Q,ProductsFilter:et},data(){return{productsData:null,productsPerPage:6,page:1,filterPriceFrom:0,filterPriceTo:0,filterCategoryId:0,filterColorId:0,isLoading:!1,isError:!1}},watch:{page(){this.loadProducts()},filterPriceFrom(){this.loadProducts()},filterPriceTo(){this.loadProducts()},filterCategoryId(){this.loadProducts()},filterColorId(){this.loadProducts()}},methods:{selectProductColor({id:t,value:s}){this.products.forEach((a=>{a.id===t&&(a.selectedColorId=s)}))},async loadProducts(){const t=new URL("https://vue-study.skillbox.cc/api/products");t.search=new URLSearchParams({page:this.page,limit:this.productsPerPage,categoryId:this.filterCategoryId,minPrice:this.filterPriceFrom,maxPrice:this.filterPriceTo,colorId:this.filterColorId}),this.isLoading=!0;try{const s=await fetch(t);if(!s.ok)throw new Error("Something went wrong");const a=await s.json();this.productsData=a,this.isLoading=!1}catch(s){console.warn(s),this.isLoading=!1,this.isError=!0}}},created(){this.loadProducts()},computed:{filteredProducts(){let t=products;return this.filterPriceFrom&&(t=t.filter((t=>t.price>=this.filterPriceFrom))),this.filterPriceTo&&(t=t.filter((t=>t.price<=this.filterPriceTo))),this.filterCategoryId&&(t=t.filter((t=>t.categoryId===this.filterCategoryId))),this.filterColorId&&(t=t.filter((t=>t.colorsId.includes(this.filterColorId)))),t},products(){return this.productsData?this.productsData.items.map((t=>({...t,img:t.image.file.url}))):[]},productsCount(){return this.productsData?this.productsData.pagination.total:0}}},it=rt,ot=(0,p.Z)(it,L,A,!1,null,null,null),ct=ot.exports,lt=function(){var t=this,s=t._self._c;return s("h1",[t._v("Page Not Found")])},nt=[],ut={name:"Page404"},dt=ut,_t=(0,p.Z)(dt,lt,nt,!1,null,null,null),pt=_t.exports,mt=function(){var t=this,s=t._self._c;return s("div",[t.isLoading?s("div",[t._v("Ищем товар...")]):t.isError?s("div",[t._v("Ошибка при загрузке товара...")]):s("main",{staticClass:"content container"},[s("div",{staticClass:"content__top"},[s("ul",{staticClass:"breadcrumbs"},[s("li",{staticClass:"breadcrumbs__item"},[s("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"main"}}},[t._v(" Каталог ")])],1),s("li",{staticClass:"breadcrumbs__item"},[s("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"main"}}},[t._v(" "+t._s(t.product.category.title)+" ")])],1),s("li",{staticClass:"breadcrumbs__item"},[s("a",{staticClass:"breadcrumbs__link"},[t._v(" "+t._s(t.product.title)+" ")])])])]),s("section",{staticClass:"item"},[s("div",{staticClass:"item__pics pics"},[s("div",{staticClass:"pics__wrapper"},[s("img",{attrs:{width:"570",height:"570",src:t.product.image.file.url,alt:t.product.title}})]),t._m(0)]),s("div",{staticClass:"item__info"},[s("span",{staticClass:"item__code"},[t._v("Артикул: "+t._s(t.product.id))]),s("h2",{staticClass:"item__title"},[t._v(t._s(t.product.title))]),s("div",{staticClass:"item__form"},[s("form",{staticClass:"form",attrs:{action:"#"},on:{submit:function(s){return s.preventDefault(),t.addToCart.apply(null,arguments)}}},[s("b",{staticClass:"item__price"},[t._v(" "+t._s(t.priceFormated)+" ₽ ")]),t._m(1),t._m(2),s("div",{staticClass:"item__row"},[s("ProductCounter",{attrs:{value:t.productAmount},on:{"update:value":t.updateProducts}}),s("button",{staticClass:"button button--primery",attrs:{type:"submit",disabled:t.isTransacting}},[t._v(" В корзину ")])],1),t.isTransacting?s("div",{style:{color:"#fff",marginTop:"10px"}},[t._v(" Добавляем товар... ")]):t._e(),t.transactionDone?s("div",{style:{color:"#fff",marginTop:"10px"}},[t._v(" Товар успешно добавлен ")]):t._e()])])]),t._m(3)])])])},ht=[function(){var t=this,s=t._self._c;return s("ul",{staticClass:"pics__list"},[s("li",{staticClass:"pics__item"},[s("a",{staticClass:"pics__link pics__link--current",attrs:{href:""}},[s("img",{attrs:{width:"98",height:"98",src:"img/phone-square-1.jpg",srcset:"img/phone-square-1@2x.jpg 2x",alt:"Название товара"}})])]),s("li",{staticClass:"pics__item"},[s("a",{staticClass:"pics__link",attrs:{href:""}},[s("img",{attrs:{width:"98",height:"98",src:"img/phone-square-2.jpg",srcset:"img/phone-square-2@2x.jpg 2x",alt:"Название товара"}})])]),s("li",{staticClass:"pics__item"},[s("a",{staticClass:"pics__link",attrs:{href:""}},[s("img",{attrs:{width:"98",height:"98",src:"img/phone-square-3.jpg",srcset:"img/phone-square-3@2x.jpg 2x",alt:"Название товара"}})])]),s("li",{staticClass:"pics__item"},[s("a",{staticClass:"pics__link",attrs:{href:"#"}},[s("img",{attrs:{width:"98",height:"98",src:"img/phone-square-4.jpg",srcset:"img/phone-square-4@2x.jpg 2x",alt:"Название товара"}})])])])},function(){var t=this,s=t._self._c;return s("fieldset",{staticClass:"form__block"},[s("legend",{staticClass:"form__legend"},[t._v("Цвет:")]),s("ul",{staticClass:"colors"},[s("li",{staticClass:"colors__item"},[s("label",{staticClass:"colors__label"},[s("input",{staticClass:"colors__radio sr-only",attrs:{type:"radio",name:"color-item",value:"blue"}}),s("span",{staticClass:"colors__value",staticStyle:{"background-color":"#73b6ea"}})])]),s("li",{staticClass:"colors__item"},[s("label",{staticClass:"colors__label"},[s("input",{staticClass:"colors__radio sr-only",attrs:{type:"radio",name:"color-item",value:"yellow"}}),s("span",{staticClass:"colors__value",staticStyle:{"background-color":"#ffbe15"}})])]),s("li",{staticClass:"colors__item"},[s("label",{staticClass:"colors__label"},[s("input",{staticClass:"colors__radio sr-only",attrs:{type:"radio",name:"color-item",value:"gray"}}),s("span",{staticClass:"colors__value",staticStyle:{"background-color":"#939393"}})])])])])},function(){var t=this,s=t._self._c;return s("fieldset",{staticClass:"form__block"},[s("legend",{staticClass:"form__legend"},[t._v("Объемб в ГБ:")]),s("ul",{staticClass:"sizes sizes--primery"},[s("li",{staticClass:"sizes__item"},[s("label",{staticClass:"sizes__label"},[s("input",{staticClass:"sizes__radio sr-only",attrs:{type:"radio",name:"sizes-item",value:"32"}}),s("span",{staticClass:"sizes__value"},[t._v(" 32gb ")])])]),s("li",{staticClass:"sizes__item"},[s("label",{staticClass:"sizes__label"},[s("input",{staticClass:"sizes__radio sr-only",attrs:{type:"radio",name:"sizes-item",value:"64"}}),s("span",{staticClass:"sizes__value"},[t._v(" 64gb ")])])]),s("li",{staticClass:"sizes__item"},[s("label",{staticClass:"sizes__label"},[s("input",{staticClass:"sizes__radio sr-only",attrs:{type:"radio",name:"sizes-item",value:"128"}}),s("span",{staticClass:"sizes__value"},[t._v(" 128gb ")])])])])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"item__desc"},[s("ul",{staticClass:"tabs"},[s("li",{staticClass:"tabs__item"},[s("a",{staticClass:"tabs__link tabs__link--current"},[t._v(" Описание ")])]),s("li",{staticClass:"tabs__item"},[s("a",{staticClass:"tabs__link",attrs:{href:"#"}},[t._v(" Характеристики ")])]),s("li",{staticClass:"tabs__item"},[s("a",{staticClass:"tabs__link",attrs:{href:"#"}},[t._v(" Гарантия ")])]),s("li",{staticClass:"tabs__item"},[s("a",{staticClass:"tabs__link",attrs:{href:"#"}},[t._v(" Оплата и доставка ")])])]),s("div",{staticClass:"item__content"},[s("p",[t._v(" Навигация GPS, ГЛОНАСС, BEIDOU Galileo и QZSS"),s("br"),t._v(" Синхронизация со смартфоном"),s("br"),t._v(" Связь по Bluetooth Smart, ANT+ и Wi-Fi"),s("br"),t._v(" Поддержка сторонних приложений"),s("br")]),s("a",{attrs:{href:"#"}},[t._v(" Все характеристики ")]),s("h3",[t._v("Что это?")]),s("p",[t._v(" Wahoo ELEMNT BOLT GPS – это велокомпьютер, который позволяет оптимизировать свои велотренировки, сделав их максимально эффективными. Wahoo ELEMNT BOLT GPS синхронизируется с датчиками по ANT+, объединяя полученную с них информацию. Данные отображаются на дисплее, а также сохраняются на смартфоне. При этом на мобильное устройство можно установить как фирменное приложение, так и различные приложения сторонних разработчиков. Велокомпьютер точно отслеживает местоположение, принимая сигнал с целого комплекса спутников. Эта информация позволяет смотреть уже преодоленные маршруты и планировать новые велопрогулки. ")]),s("h3",[t._v("Дизайн")]),s("p",[t._v(" Велокомпьютер Wahoo ELEMNT BOLT очень компактный. Размеры устройства составляют всего 74,6 x 47,3 x 22,1 мм. что не превышает габариты смартфона. Корпус гаджета выполнен из черного пластика. На обращенной к пользователю стороне расположен дисплей диагональю 56 мм. На дисплей выводятся координаты и скорость, а также полученная со смартфона и синхронизированных датчиков информация: интенсивность, скорость вращения педалей, пульс и т.д. (датчики не входят в комплект поставки). Корпус велокомпьютера имеет степень защиты от влаги IPX7. Это означает, что устройство не боится пыли, а также выдерживает кратковременное (до 30 минут) погружение в воду на глубину не более 1 метра. ")])])])}],ft=function(){var t=this,s=t._self._c;return s("div",{staticClass:"form__counter"},[s("button",{attrs:{type:"button","aria-label":"Убрать один товар"},on:{click:function(s){return s.preventDefault(),t.deleteOne.apply(null,arguments)}}},[s("svg",{attrs:{width:"12",height:"12",fill:"currentColor"}},[s("use",{attrs:{"xlink:href":"#icon-minus"}})])]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.counter,expression:"counter",modifiers:{number:!0}}],attrs:{type:"text",name:"count"},domProps:{value:t.counter},on:{input:function(s){s.target.composing||(t.counter=t._n(s.target.value))},blur:function(s){return t.$forceUpdate()}}}),s("button",{attrs:{type:"button","aria-label":"Добавить один товар"},on:{click:function(s){return s.preventDefault(),t.addOne.apply(null,arguments)}}},[s("svg",{attrs:{width:"12",height:"12",fill:"currentColor"}},[s("use",{attrs:{"xlink:href":"#icon-plus"}})])])])},vt=[],Ct={name:"ProductCounter",props:["value"],methods:{updateValue(t){this.$emit("update:value",t)},deleteOne(){this.counter<=0||this.updateValue(--this.counter)},addOne(){this.updateValue(++this.counter)}},computed:{counter:{get(){return+this.value},set(t){this.updateValue(t)}}}},gt=Ct,bt=(0,p.Z)(gt,ft,vt,!1,null,null,null),yt=bt.exports,kt={name:"ProductPage",components:{ProductCounter:yt},data(){return{productAmount:0,productData:null,isLoading:!1,isError:!1,isTransacting:!1,transactionDone:!1}},methods:{...(0,u.nv)(["addProductToCart"]),addToCart(){this.isTransacting=!0;const t={productId:this.product.id,amount:+this.productAmount};this.addProductToCart(t).then((()=>{this.isTransacting=!1,this.transactionDone=!0,setTimeout((()=>{this.transactionDone=!1}),3e3)}))},updateProducts(t){this.productAmount=t},async loadProduct(){const t=new URL(`https://vue-study.skillbox.cc/api/products/${this.$route.params.id}`);this.isLoading=!0;try{const s=await fetch(t);if(!s.ok)throw new Error("Something wrong");const a=await s.json();this.productData=a,this.isLoading=!1}catch(s){console.warn(s),this.isError=!0,this.isLoading=!1}}},beforeMount(){this.productAmount=this.productAmountInCart},computed:{...(0,u.Se)(["getProductById"]),productId(){return parseInt(this.$route.params.id)},productAmountInCart(){const t=this.getProductById(this.productId);return t?t.amount:0},product(){return this.productData?this.productData:null},priceFormated(){return j(this.product.price)}},watch:{"$route.params.id":{handler(){this.loadProduct()},immediate:!0}}},Pt=kt,wt=(0,p.Z)(Pt,mt,ht,!1,null,null,null),It=wt.exports,xt=function(){var t=this,s=t._self._c;return s("main",{staticClass:"content container"},[s("div",{staticClass:"content__top"},[s("ul",{staticClass:"breadcrumbs"},[s("li",{staticClass:"breadcrumbs__item"},[s("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"main"}}},[t._v(" Каталог ")])],1),t._m(0)]),s("h1",{staticClass:"content__title"},[t._v("Корзина")]),s("span",{staticClass:"content__info"},[t._v(" 3 товара ")])]),t.isLoading?s("div",[t._v("Загружаем корзину "),s("img",{attrs:{src:"img/rocket.gif"}})]):t._e(),s("section",{staticClass:"cart"},[s("form",{staticClass:"cart__form form",attrs:{action:"#",method:"POST"}},[s("div",{staticClass:"cart__field"},[s("ul",{staticClass:"cart__list"},t._l(t.products,(function(t){return s("CartItem",{key:t.id,attrs:{product:t}})})),1)]),s("div",{staticClass:"cart__block"},[s("p",{staticClass:"cart__desc"},[t._v("Мы посчитаем стоимость доставки на следующем этапе")]),s("p",{staticClass:"cart__price"},[t._v(" Итого: "),s("span",[t._v(t._s(t._f("numberFormat")(t.total))+" ₽")])]),t.products.length>0?s("router-link",{staticClass:"cart__button button button--primery",attrs:{to:{name:"order"},type:"button"}},[t._v("Оформить заказ")]):t._e()],1)])])])},Tt=[function(){var t=this,s=t._self._c;return s("li",{staticClass:"breadcrumbs__item"},[s("a",{staticClass:"breadcrumbs__link"},[t._v(" Корзина ")])])}],Dt=function(){var t=this,s=t._self._c;return s("li",{staticClass:"cart__item product"},[s("div",{staticClass:"product__pic"},[s("img",{attrs:{src:t.product.img,width:"120",height:"120",alt:t.product.title}})]),s("h3",{staticClass:"product__title"},[t._v(" "+t._s(t.product.title)+" ")]),s("span",{staticClass:"product__code"},[t._v(" Артикул: "+t._s(t.product.id)+" ")]),s("ProductCounter",{attrs:{value:t.amount},on:{"update:value":t.updateAmount}}),s("b",{staticClass:"product__price"},[t._v(" "+t._s(t._f("numberFormat")(t.amount*t.product.price))+" ₽ ")]),s("button",{staticClass:"product__del button-del",attrs:{type:"button","aria-label":"Удалить товар из корзины"},on:{click:function(s){return s.preventDefault(),t.deleteProduct(t.product.id)}}},[s("svg",{attrs:{width:"20",height:"20",fill:"currentColor"}},[s("use",{attrs:{"xlink:href":"#icon-close"}})])])],1)},Ft=[],Ot={name:"CartItem",components:{ProductCounter:yt},props:["product"],filters:{numberFormat:j},methods:{...(0,u.nv)(["deleteProduct","updateProductAmount"]),updateAmount(t){this.amount=t}},computed:{amount:{get(){return this.product.amount},set(t){t<0||(0===t?this.deleteProduct(this.product.id):this.updateProductAmount({id:this.product.id,amount:t}))}}}},Lt=Ot,At=(0,p.Z)(Lt,Dt,Ft,!1,null,null,null),Et=At.exports,St={computed:{...(0,u.Se)({products:"cartProductDetails",total:"cartTotal",isLoading:"cartIsLoading",productsCount:"cartProductsCount"})},filters:{numberFormat:j}},$t={name:"CartPage",components:{CartItem:Et},mixins:[St]},Zt=$t,jt=(0,p.Z)(Zt,xt,Tt,!1,null,null,null),Bt=jt.exports,Vt=function(){var t=this,s=t._self._c;return s("main",{staticClass:"content container"},[t.orderIsSending?s("BaseLoader"):t._e(),s("div",{staticClass:"content__top"},[s("ul",{staticClass:"breadcrumbs"},[s("li",{staticClass:"breadcrumbs__item"},[s("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"main"}}},[t._v(" Каталог ")])],1),s("li",{staticClass:"breadcrumbs__item"},[s("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"cart"}}},[t._v(" Корзина ")])],1),t._m(0)]),s("h1",{staticClass:"content__title"},[t._v("Корзина")]),s("span",{staticClass:"content__info"},[t._v(" 3 товара ")])]),s("section",{staticClass:"cart"},[s("form",{staticClass:"cart__form form",attrs:{action:"#",method:"POST"},on:{submit:function(s){return s.preventDefault(),t.sendOrder.apply(null,arguments)}}},[s("div",{staticClass:"cart__field"},[s("div",{staticClass:"cart__data"},[s("BaseFormInput",{attrs:{title:"ФИО",error:t.formErrors.name,placeholder:"Введите ваше полное имя"},model:{value:t.formData.name,callback:function(s){t.$set(t.formData,"name",s)},expression:"formData.name"}}),s("BaseFormInput",{attrs:{title:"Адрес доставки",error:t.formErrors.address,placeholder:"Введите ваш адрес"},model:{value:t.formData.address,callback:function(s){t.$set(t.formData,"address",s)},expression:"formData.address"}}),s("BaseFormInput",{attrs:{title:"Телефон",error:t.formErrors.phone,placeholder:"Введите ваш телефон"},model:{value:t.formData.phone,callback:function(s){t.$set(t.formData,"phone",s)},expression:"formData.phone"}}),s("BaseFormInput",{attrs:{title:"Email",error:t.formErrors.email,placeholder:"Введите ваш Email"},model:{value:t.formData.email,callback:function(s){t.$set(t.formData,"email",s)},expression:"formData.email"}}),s("BaseFormText",{attrs:{title:"Комментарий к заказу",error:t.formErrors.comment,placeholder:"Ваши пожелания"},model:{value:t.formData.comment,callback:function(s){t.$set(t.formData,"comment",s)},expression:"formData.comment"}})],1),t._m(1)]),s("div",{staticClass:"cart__block"},[s("OrderProducts",{attrs:{products:t.products}}),s("div",{staticClass:"cart__total"},[t._m(2),s("p",[t._v(" Итого: "),s("b",[t._v(t._s(t.productsCount))]),t._v(" товара на сумму "),s("b",[t._v(t._s(t._f("numberFormat")(t.total))+" ₽")])])]),s("button",{staticClass:"cart__button button button--primery",attrs:{type:"submit"}},[t._v("Оформить заказ")])],1),t.formErrorMessage?s("div",{staticClass:"cart__error form__error-block"},[s("h4",[t._v("Заявка не отправлена!")]),s("p",[t._v(t._s(t.formErrorMessage))])]):t._e()])])],1)},Kt=[function(){var t=this,s=t._self._c;return s("li",{staticClass:"breadcrumbs__item"},[s("a",{staticClass:"breadcrumbs__link"},[t._v(" Оформление заказа ")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"cart__options"},[s("h3",{staticClass:"cart__title"},[t._v("Доставка")]),s("ul",{staticClass:"cart__options options"},[s("li",{staticClass:"options__item"},[s("label",{staticClass:"options__label"},[s("input",{staticClass:"options__radio sr-only",attrs:{type:"radio",name:"delivery",value:"0",checked:""}}),s("span",{staticClass:"options__value"},[t._v(" Самовывоз "),s("b",[t._v("бесплатно")])])])]),s("li",{staticClass:"options__item"},[s("label",{staticClass:"options__label"},[s("input",{staticClass:"options__radio sr-only",attrs:{type:"radio",name:"delivery",value:"500"}}),s("span",{staticClass:"options__value"},[t._v(" Курьером "),s("b",[t._v("500 ₽")])])])])]),s("h3",{staticClass:"cart__title"},[t._v("Оплата")]),s("ul",{staticClass:"cart__options options"},[s("li",{staticClass:"options__item"},[s("label",{staticClass:"options__label"},[s("input",{staticClass:"options__radio sr-only",attrs:{type:"radio",name:"pay",value:"card"}}),s("span",{staticClass:"options__value"},[t._v(" Картой при получении ")])])]),s("li",{staticClass:"options__item"},[s("label",{staticClass:"options__label"},[s("input",{staticClass:"options__radio sr-only",attrs:{type:"radio",name:"pay",value:"cash"}}),s("span",{staticClass:"options__value"},[t._v(" Наличными при получении ")])])])])])},function(){var t=this,s=t._self._c;return s("p",[t._v("Доставка: "),s("b",[t._v("500 ₽")])])}],Ut=(a(7658),function(){var t=this,s=t._self._c;return s("label",{staticClass:"form__label"},[t._t("default"),s("span",{staticClass:"form__value"},[t._v(t._s(t.title))]),t.error?s("span",{staticClass:"form__error"},[t._v(t._s(t.error))]):t._e()],2)}),Nt=[],zt={name:"BaseFormField",props:["title","error"]},qt=zt,Mt=(0,p.Z)(qt,Ut,Nt,!1,null,null,null),Rt=Mt.exports,Gt=function(){var t=this,s=t._self._c;return s("BaseFormField",{attrs:{title:t.title,error:t.error}},["checkbox"===t.type?s("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"form__input",attrs:{placeholder:t.placeholder,type:"checkbox"},domProps:{checked:Array.isArray(t.inputValue)?t._i(t.inputValue,null)>-1:t.inputValue},on:{change:function(s){var a=t.inputValue,e=s.target,r=!!e.checked;if(Array.isArray(a)){var i=null,o=t._i(a,i);e.checked?o<0&&(t.inputValue=a.concat([i])):o>-1&&(t.inputValue=a.slice(0,o).concat(a.slice(o+1)))}else t.inputValue=r}}}):"radio"===t.type?s("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"form__input",attrs:{placeholder:t.placeholder,type:"radio"},domProps:{checked:t._q(t.inputValue,null)},on:{change:function(s){t.inputValue=null}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"form__input",attrs:{placeholder:t.placeholder,type:t.type},domProps:{value:t.inputValue},on:{input:function(s){s.target.composing||(t.inputValue=s.target.value)}}})])},Jt=[],Wt={props:["title","error","value","placeholder"],components:{BaseFormField:Rt},computed:{inputValue:{get(){return this.value},set(t){this.$emit("input",t)}}}},Ht={props:{type:{default:"text"}},mixins:[Wt]},Qt=Ht,Xt=(0,p.Z)(Qt,Gt,Jt,!1,null,null,null),Yt=Xt.exports,ts=function(){var t=this,s=t._self._c;return s("BaseFormField",{attrs:{title:t.title,error:t.error}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"form__input form__input--area",attrs:{placeholder:t.placeholder},domProps:{value:t.inputValue},on:{input:function(s){s.target.composing||(t.inputValue=s.target.value)}}})])},ss=[],as={mixins:[Wt]},es=as,rs=(0,p.Z)(es,ts,ss,!1,null,null,null),is=rs.exports,os=function(){var t=this;t._self._c;return t._m(0)},cs=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"loader"},[s("div",{staticClass:"lds-facebook"},[s("div"),s("div"),s("div")])])}],ls={name:"BaseLoader"},ns=ls,us=(0,p.Z)(ns,os,cs,!1,null,null,null),ds=us.exports,_s=function(){var t=this,s=t._self._c;return s("ul",{staticClass:"cart__orders"},t._l(t.products,(function(a){return s("li",{key:a.id,staticClass:"cart__order"},[s("h3",[t._v(t._s(a.title))]),s("b",[t._v(t._s(t._f("numberFormat")(a.price))+" ₽")]),s("span",[t._v("Артикул: "+t._s(a.id))])])})),0)},ps=[],ms={name:"OrderProducts",props:["products"],filters:{numberFormat:j}},hs=ms,fs=(0,p.Z)(hs,_s,ps,!1,null,null,null),vs=fs.exports,Cs={name:"OrderPage",components:{BaseFormField:Rt,BaseFormInput:Yt,BaseFormText:is,OrderProducts:vs,BaseLoader:ds},data(){return{formData:{},formErrors:{},formErrorMessage:"",orderIsSending:!1}},methods:{...(0,u.nv)({placeOrder:"placeOrder"}),...(0,u.OI)({resetCart:"resetCart",updateOrderInfo:"updateOrderInfo"}),async sendOrder(){this.orderIsSending=!0,this.formErrors={};const{response:t,payload:s}=await this.placeOrder(this.formData);t.ok?(this.formData={},this.resetCart(),this.updateOrderInfo(s),this.$router.push({name:"order-info",params:{id:s.id}})):(this.formErrors=s.error.request||{},this.formErrorMessage=s.error.message),this.orderIsSending=!1}},mixins:[St]},gs=Cs,bs=(0,p.Z)(gs,Vt,Kt,!1,null,null,null),ys=bs.exports,ks=function(){var t=this,s=t._self._c;return s("main",{staticClass:"content container"},[s("div",{staticClass:"content__top"},[t._m(0),s("h1",{staticClass:"content__title"},[t._v(" Заказ оформлен "),s("span",[t._v("№ "+t._s(t.orderInfo.id))])])]),s("section",{staticClass:"cart"},[s("form",{staticClass:"cart__form form",attrs:{action:"#",method:"POST"}},[s("div",{staticClass:"cart__field"},[s("p",{staticClass:"cart__message"},[t._v(" Благодарим за выбор нашего магазина. На Вашу почту придет письмо с деталями заказа. Наши менеджеры свяжутся с Вами в течение часа для уточнения деталей доставки. ")]),s("ul",{staticClass:"dictionary"},[s("li",{staticClass:"dictionary__item"},[s("span",{staticClass:"dictionary__key"},[t._v(" Получатель ")]),s("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.orderInfo.name)+" ")])]),s("li",{staticClass:"dictionary__item"},[s("span",{staticClass:"dictionary__key"},[t._v(" Адрес доставки ")]),s("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.orderInfo.address)+" ")])]),s("li",{staticClass:"dictionary__item"},[s("span",{staticClass:"dictionary__key"},[t._v(" Телефон ")]),s("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.orderInfo.phone)+" ")])]),s("li",{staticClass:"dictionary__item"},[s("span",{staticClass:"dictionary__key"},[t._v(" Email ")]),s("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.orderInfo.email)+" ")])]),t._m(1)])]),s("div",{staticClass:"cart__block"},[s("OrderProducts",{attrs:{products:t.products}}),s("div",{staticClass:"cart__total"},[t._m(2),s("p",[t._v(" Итого: "),s("b",[t._v("3")]),t._v(" товара на сумму "),s("b",[t._v(t._s(t._f("numberFormat")(t.orderInfo.totalPrice))+" ₽")])])])],1)])])])},Ps=[function(){var t=this,s=t._self._c;return s("ul",{staticClass:"breadcrumbs"},[s("li",{staticClass:"breadcrumbs__item"},[s("a",{staticClass:"breadcrumbs__link",attrs:{href:"index.html"}},[t._v(" Каталог ")])]),s("li",{staticClass:"breadcrumbs__item"},[s("a",{staticClass:"breadcrumbs__link",attrs:{href:"cart.html"}},[t._v(" Корзина ")])]),s("li",{staticClass:"breadcrumbs__item"},[s("a",{staticClass:"breadcrumbs__link"},[t._v(" Оформление заказа ")])])])},function(){var t=this,s=t._self._c;return s("li",{staticClass:"dictionary__item"},[s("span",{staticClass:"dictionary__key"},[t._v(" Способ оплаты ")]),s("span",{staticClass:"dictionary__value"},[t._v(" картой при получении ")])])},function(){var t=this,s=t._self._c;return s("p",[t._v("Доставка: "),s("b",[t._v("500 ₽")])])}],ws={name:"OrderInfoPage",components:{OrderProducts:vs},computed:{...(0,u.Se)({orderInfo:"getOrderInfo"}),products(){return this.orderInfo.basket.items.map((t=>t.product))}},created(){this.$store.orderInfo&&this.$store.orderInfo.id===+this.$route.params.id||this.$store.dispatch("loadOrder",this.$route.params.id)},filters:{numberFormat:j}},Is=ws,xs=(0,p.Z)(Is,ks,Ps,!1,null,null,null),Ts=xs.exports;e.ZP.use(O.ZP);const Ds=[{path:"/",name:"main",component:ct},{path:"/product/:id",name:"product",component:It},{path:"/cart",name:"cart",component:Bt},{path:"/order",name:"order",component:ys},{path:"/order/:id",name:"order-info",component:Ts},{path:"/:catchAll(.*)",name:"notFound",component:pt}],Fs=new O.ZP({routes:Ds});var Os=Fs;e.ZP.use(u.ZP);var Ls=new u.ZP.Store({state:{cartProducts:[],userAccsessKey:null,cartProductsData:[],cartIsLoading:!1,orderInfo:null},getters:{cartProductDetails(t){return t.cartProductsData.map((t=>({id:t.product.id,title:t.product.title,img:t.product.image.file.url,amount:+t.quantity,price:+t.price})))},cartTotal(t,s){return s.cartProductDetails.reduce(((t,s)=>t+s.amount*s.price),0)},getProductById:t=>s=>t.cartProducts.find((t=>t.productId===s)),cartIsLoading(t){return t.cartIsLoading},cartProductsCount(t,s){return s.cartProductDetails.reduce(((t,s)=>t+s.amount),0)},getOrderInfo(t){return t.orderInfo}},mutations:{resetCart(t){t.cartProducts=[],t.cartProductsData=[]},updateProductAmount(t,s){t.cartProducts.forEach((t=>{t.productId===s.id&&(t.amount=s.amount)}))},updateUserKey(t,s){t.userAccsessKey=s},updateCartProductsData(t,s){t.cartProductsData=s},syncCartProducts(t){t.cartProducts=t.cartProductsData.map((t=>({productId:t.product.id,amount:t.quantity})))},loadingToggle(t,s){t.cartIsLoading=s},updateOrderInfo(t,s){t.orderInfo=s}},actions:{async loadCart(t){const s=new URL("https://vue-study.skillbox.cc/api/baskets");s.searchParams.append("userAccessKey",t.state.userAccsessKey),t.commit("loadingToggle",!0);try{const a=await fetch(s);if(!a.ok)throw new Error("Could not be able to load cart");const e=await a.json();if(!t.state.userAccsessKey){const s=e.user.accessKey;localStorage.setItem("userAccsessKey",s),t.commit("updateUserKey",s)}t.commit("updateCartProductsData",e.items),t.commit("syncCartProducts"),t.commit("loadingToggle",!1)}catch(a){console.warn(a),t.commit("loadingToggle",!1)}},async addProductToCart(t,{productId:s,amount:a}){const e=new URL("https://vue-study.skillbox.cc/api/baskets/products");e.searchParams.append("userAccessKey",t.state.userAccsessKey);try{const r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({productId:s,quantity:a})});if(!r.ok)throw new Error("Something went wrong");const i=await r.json();t.commit("updateCartProductsData",i.items),t.commit("syncCartProducts")}catch(r){console.warn(r)}},async updateProductAmount(t,s){t.commit("updateProductAmount",s);const{id:a,amount:e}=s,r=new URL("https://vue-study.skillbox.cc/api/baskets/products");r.searchParams.append("userAccessKey",t.state.userAccsessKey);try{const s=await fetch(r,{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({productId:a,quantity:e})});if(!s.ok)throw new Error("Something went wrong");const i=await s.json();t.commit("updateCartProductsData",i.items)}catch(i){t.commit("syncCartProducts"),console.warn(i)}},async deleteProduct(t,s){const a=new URL("https://vue-study.skillbox.cc/api/baskets/products");a.searchParams.append("userAccessKey",t.state.userAccsessKey);try{const e=await fetch(a,{method:"DELETE",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({productId:s})});if(!e.ok)throw new Error("Something went wrong");const r=await e.json();t.commit("updateCartProductsData",r.items),t.commit("syncCartProducts")}catch(e){console.warn(e)}},async placeOrder(t,s){const a=new URL("https://vue-study.skillbox.cc/api/orders");a.searchParams.append("userAccessKey",t.state.userAccsessKey);try{const t=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(s)}),e=await t.json();return{response:t,payload:e}}catch(e){console.log(e)}},async loadOrder(t,s){console.log("ID",s);const a=new URL(`https://vue-study.skillbox.cc/api/baskets/${s}`);a.searchParams.append("userAccessKey",t.state.userAccsessKey);try{const s=await fetch(a);if(!s.ok)throw new Error("Could not be able to load order");const e=await s.json();t.commit("updateOrderInfo",e)}catch(e){console.warn(e)}}},modules:{}});e.ZP.config.productionTip=!1,new e.ZP({router:Os,store:Ls,render:t=>t(F)}).$mount("#app")}},s={};function a(e){var r=s[e];if(void 0!==r)return r.exports;var i=s[e]={exports:{}};return t[e](i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(s,e,r,i){if(!e){var o=1/0;for(u=0;u<t.length;u++){e=t[u][0],r=t[u][1],i=t[u][2];for(var c=!0,l=0;l<e.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((function(t){return a.O[t](e[l])}))?e.splice(l--,1):(c=!1,i<o&&(o=i));if(c){t.splice(u--,1);var n=r();void 0!==n&&(s=n)}}return s}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[e,r,i]}}(),function(){a.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(s,{a:s}),s}}(),function(){a.d=function(t,s){for(var e in s)a.o(s,e)&&!a.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:s[e]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)}}(),function(){var t={143:0};a.O.j=function(s){return 0===t[s]};var s=function(s,e){var r,i,o=e[0],c=e[1],l=e[2],n=0;if(o.some((function(s){return 0!==t[s]}))){for(r in c)a.o(c,r)&&(a.m[r]=c[r]);if(l)var u=l(a)}for(s&&s(e);n<o.length;n++)i=o[n],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(u)},e=self["webpackChunk_03_catalog"]=self["webpackChunk_03_catalog"]||[];e.forEach(s.bind(null,0)),e.push=s.bind(null,e.push.bind(e))}();var e=a.O(void 0,[998],(function(){return a(648)}));e=a.O(e)})();
//# sourceMappingURL=app.5467e9e4.js.map